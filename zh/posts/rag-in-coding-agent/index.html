<!DOCTYPE html>

<html lang="zh">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  
  
    
  
  <meta name="description" content="让检索和生成协作，编码助手才能真正懂需求、找资料、写代码、修 bug。">

  <title>当 RAG 遇上编程助手</title>
  <link rel="icon" type="image/png" sizes="32x32" href="https://psiace.me/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://psiace.me/img/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://psiace.me/img/apple-touch-icon.png">
  
  <style>

  /* light mode colors */
  body {
    --primary-color: #5871a2;
    --primary-pale-color: #5871a233;
    --primary-decoration-color: #5871a210;
    --bg-color: #ffffff;
    --text-color: #2f3030;
    --text-pale-color: #767676;
    --text-decoration-color: #a9a9a9;
    --highlight-mark-color: #5f75b020;

    --callout-note-color: #5871a2;
    --callout-tip-color: #268556;
    --callout-important-color: #885fc9;
    --callout-warning-color: #ab6632;
    --callout-caution-color: #c64e4e;
  }

  /* dark mode colors */
  body.dark {
    --primary-color: #6f8fd1;
    --primary-pale-color: #6f8fd166;
    --primary-decoration-color: #6f8fd112;
    --bg-color: #1c1c1c;
    --text-color: #c1c1c1;
    --text-pale-color: #848484;
    --text-decoration-color: #5f5f5f;
    --highlight-mark-color: #8296cb3b;

    --callout-note-color: #6f8fd1;
    --callout-tip-color: #47976f;
    --callout-important-color: #9776cd;
    --callout-warning-color: #ad7a52;
    --callout-caution-color: #d06161;
  }

  /* typography */
  body {
    --main-font: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    --code-font: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    --homepage-max-width: 768px;
    --main-max-width: 768px;
    --avatar-size: 60px;
    --font-size: 16px;
    --line-height: 1.75;
    --img-border-radius: 0px;
    --detail-border-radius: 0px;
    --dark-mode-img-brightness: 0.75;
    --dark-mode-chart-brightness: 0.75;
    --inline-code-border-radius: 2px;
    --inline-code-bg-color: var(--primary-decoration-color);
    --block-code-border-radius: 0px;
    --block-code-border-color: var(--primary-color);
    --detail-border-color: var(--primary-color);
  }

  /* language switch */
  .lang-switch {
    display: inline-flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-top: 0.75rem;
    font-size: 0.85rem;
    color: var(--text-pale-color);
  }

  .lang-switch__label {
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    font-size: 0.75rem;
    color: var(--text-pale-color);
  }

  .lang-switch__current {
    padding: 0.15rem 0.55rem;
    border-radius: 999px;
    background: var(--primary-decoration-color);
    border: 1px solid transparent;
    color: var(--text-color);
    font-size: 0.8rem;
    letter-spacing: 0.01em;
  }

  .dark .lang-switch__current {
    background: rgba(255, 255, 255, 0.08);
    color: var(--text-color);
  }

  .lang-switch__link {
    padding: 0.15rem 0.55rem;
    border-radius: 999px;
    border: 1px solid var(--text-decoration-color);
    font-size: 0.8rem;
    color: var(--text-pale-color);
    text-decoration: none;
    transition: border 0.2s ease, color 0.2s ease, background 0.2s ease;
  }

  .lang-switch__link:hover,
  .lang-switch__link:focus-visible {
    border-color: var(--primary-color);
    color: var(--primary-color);
    background: var(--primary-pale-color);
    outline: none;
  }

  #post-info .lang-switch {
    margin-left: auto;
    margin-top: 0;
    gap: 0.3rem;
  }

  #post-info .lang-switch__label {
    display: none;
  }

  .homepage .lang-switch {
    margin-top: 1rem;
  }
</style>

  <link rel="stylesheet" href="https://psiace.me/main.css">
  

<link id="hl" rel="stylesheet" type="text/css" href="/hl-light.css" />



  
</head>

<body class="post">
  
  <script>
    const theme = sessionStorage.getItem('theme');
    const match = window.matchMedia("(prefers-color-scheme: dark)").matches
    if ((theme && theme == 'dark') || (!theme && match)) {
      document.body.classList.add('dark');
      const hl = document.querySelector('link#hl');
      if (hl) hl.href = 'https://psiace.me/hl-dark.css';
    }
  </script>
  
  





<div id="wrapper">
  <div id="blank"></div>
  <aside>
    
    
    <nav>
      <ul>
        
        <li>
          <a class="h2" href="#wei-shen-me-dan-kao-llm-bu-gou">为什么单靠 LLM 不够</a>
          
        </li>
        
        <li>
          <a class="h2" href="#yi-ge-wan-zheng-de-rag-bian-cheng-xun-huan">一个完整的 RAG 编程循环</a>
          
          <ul>
            
            <li>
              <a class="h3" href="#ren-wu-cheng-qing">任务澄清</a>
            </li>
            
            <li>
              <a class="h3" href="#shou-ji-shang-xia-wen">收集上下文</a>
            </li>
            
            <li>
              <a class="h3" href="#sheng-cheng-sha-xiang-yan-zheng">生成 + 沙箱验证</a>
            </li>
            
            <li>
              <a class="h3" href="#jiao-fu">交付</a>
            </li>
            
          </ul>
          
        </li>
        
        <li>
          <a class="h2" href="#rag-zhen-zheng-jie-jue-de-tong-dian">RAG 真正解决的痛点</a>
          
        </li>
        
        <li>
          <a class="h2" href="#jian-yi-de-zui-jia-shi-jian">建议的最佳实践</a>
          
        </li>
        
      </ul>
    </nav>
    
    
    <button id="back-to-top" aria-label="back to top">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>

    </button>
    
  </aside>
  <main>
    

  



  

<header>
  <nav>
    <a id="back-link" href="https:&#x2F;&#x2F;psiace.me&#x2F;zh&#x2F;&#x2F;posts">← 返回</a>
  </nav>
</header>


    <div>
      
      
      
      
      <div id="copy-cfg" style="display: none;" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
"></div>
      
      <article class="prose">
        <h1>当 RAG 遇上编程助手</h1>
        <div id="post-info">
          <div id="date">
            <span id="publish">Jun 18, 2025</span>
            </div>

          
          <div id="tags">
            <a class="instant" href="https://psiace.me/tags/rag"><span>#</span>RAG</a><a class="instant" href="https://psiace.me/tags/retrieval"><span>#</span>Retrieval</a><a class="instant" href="https://psiace.me/tags/agent"><span>#</span>Agent</a><a class="instant" href="https://psiace.me/tags/coding"><span>#</span>Coding</a><a class="instant" href="https://psiace.me/tags/programming"><span>#</span>Programming</a>
          </div>
          

          
          
          



  



  




  
    
    
    
      
    
    
    
  

  


  <div class="lang-switch" role="navigation" aria-label="语言">
    <span class="lang-switch__label">语言:</span>
    <span class="lang-switch__current">中文</span>
    <a class="lang-switch__link" href="https://psiace.me/posts/rag-in-coding-agent/">English</a> 
  </div>


        </div>

        
        

        

        <h2 id="wei-shen-me-dan-kao-llm-bu-gou">为什么单靠 LLM 不够<a class="zola-anchor" href="#wei-shen-me-dan-kao-llm-bu-gou" aria-label="Anchor link for: wei-shen-me-dan-kao-llm-bu-gou" style="visibility: hidden;"></a>
</h2>
<p>写代码最费时的地方不是敲键盘，而是：</p>
<ul>
<li>看懂庞大的旧代码；</li>
<li>在仓库里定位相关文件；</li>
<li>理解框架的各种约定；</li>
<li>排查莫名其妙的错误日志。</li>
</ul>
<p>LLM 虽然能“续写代码”，但不了解上下文，很容易耍流氓。引入 RAG（Retrieval-Augmented Generation）后，助手可以先检索，再生成——像是一个随叫随到的资深同事。</p>
<h2 id="yi-ge-wan-zheng-de-rag-bian-cheng-xun-huan">一个完整的 RAG 编程循环<a class="zola-anchor" href="#yi-ge-wan-zheng-de-rag-bian-cheng-xun-huan" aria-label="Anchor link for: yi-ge-wan-zheng-de-rag-bian-cheng-xun-huan" style="visibility: hidden;"></a>
</h2>
<pre data-lang="mermaid" class="language-mermaid z-code"><code class="language-mermaid" data-lang="mermaid"><span class="z-text z-plain">graph LR
</span><span class="z-text z-plain">   subgraph TaskInit [1. 任务澄清]
</span><span class="z-text z-plain">       direction TB
</span><span class="z-text z-plain">       A[读懂需求] --&gt; B[准备环境]
</span><span class="z-text z-plain">       B --&gt; C[扫描代码库]
</span><span class="z-text z-plain">       B --&gt; D[加载规范 &amp; 文档]
</span><span class="z-text z-plain">   end
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">   subgraph ContextBuild [2. 收集上下文]
</span><span class="z-text z-plain">       direction TB
</span><span class="z-text z-plain">       E[查框架/库文档]
</span><span class="z-text z-plain">       E --&gt; F[找类似代码]
</span><span class="z-text z-plain">       F --&gt; G[搜问答平台]
</span><span class="z-text z-plain">       G --&gt; H[拼出知识 Soup]
</span><span class="z-text z-plain">   end
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">   subgraph CodeWork [3. 生成与验证]
</span><span class="z-text z-plain">       direction TB
</span><span class="z-text z-plain">       I[生成补丁] --&gt; J[沙箱运行]
</span><span class="z-text z-plain">       J --&gt; K[记录结果]
</span><span class="z-text z-plain">   end
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">   subgraph HandleFeedback [4. 处理反馈]
</span><span class="z-text z-plain">       direction TB
</span><span class="z-text z-plain">       L[成功 ✅]
</span><span class="z-text z-plain">       M[失败 ❌ → 诊断 &amp; 修复]
</span><span class="z-text z-plain">   end
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">   subgraph Finish [5. 收尾]
</span><span class="z-text z-plain">       N[交付补丁 + 说明]
</span><span class="z-text z-plain">   end
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">   TaskInit --&gt; ContextBuild --&gt; CodeWork --&gt; HandleFeedback
</span><span class="z-text z-plain">   K --&gt;|成功| L --&gt; Finish
</span><span class="z-text z-plain">   K --&gt;|失败| M -.-&gt; ContextBuild
</span></code></pre>
<h3 id="ren-wu-cheng-qing">任务澄清<a class="zola-anchor" href="#ren-wu-cheng-qing" aria-label="Anchor link for: ren-wu-cheng-qing" style="visibility: hidden;"></a>
</h3>
<p>助手先问清楚：“你要的认证是 JWT 还是 OAuth？”、“这个项目用的是 FastAPI 还是 Django？”同时建立工作目录、读取配置、构建代码索引地图。</p>
<h3 id="shou-ji-shang-xia-wen">收集上下文<a class="zola-anchor" href="#shou-ji-shang-xia-wen" aria-label="Anchor link for: shou-ji-shang-xia-wen" style="visibility: hidden;"></a>
</h3>
<ul>
<li>官方文档、内部 Wiki；</li>
<li>仓库里已有的相似实现；</li>
<li>StackOverflow / GitHub Issues 等社区问答；</li>
<li>团队自定义的编码规范。</li>
</ul>
<p>这些信息拼成“知识汤”，保证后续的代码生成有出处可查。</p>
<h3 id="sheng-cheng-sha-xiang-yan-zheng">生成 + 沙箱验证<a class="zola-anchor" href="#sheng-cheng-sha-xiang-yan-zheng" aria-label="Anchor link for: sheng-cheng-sha-xiang-yan-zheng" style="visibility: hidden;"></a>
</h3>
<p>助手在独立环境里动手改代码、跑测试、收集日志。失败了就把上下文补齐再试，成功了就打包结果。</p>
<h3 id="jiao-fu">交付<a class="zola-anchor" href="#jiao-fu" aria-label="Anchor link for: jiao-fu" style="visibility: hidden;"></a>
</h3>
<p>除了最终代码，还要附上：修改说明、需要人工复核的点、关联的文档链接。这样才算一个可落地的工作流。</p>
<h2 id="rag-zhen-zheng-jie-jue-de-tong-dian">RAG 真正解决的痛点<a class="zola-anchor" href="#rag-zhen-zheng-jie-jue-de-tong-dian" aria-label="Anchor link for: rag-zhen-zheng-jie-jue-de-tong-dian" style="visibility: hidden;"></a>
</h2>
<ol>
<li><strong>定位成本</strong>：海量仓库里精准找到相关文件和上下文。</li>
<li><strong>解释能力</strong>：能说清“为什么这么写”，而不是只给结论。</li>
<li><strong>调试反馈</strong>：把报错、日志、外部知识结合在一起分析，而不是盲目试错。</li>
<li><strong>协作透明度</strong>：知识 Soup 可以存档，方便团队复盘、复用。</li>
</ol>
<h2 id="jian-yi-de-zui-jia-shi-jian">建议的最佳实践<a class="zola-anchor" href="#jian-yi-de-zui-jia-shi-jian" aria-label="Anchor link for: jian-yi-de-zui-jia-shi-jian" style="visibility: hidden;"></a>
</h2>
<ul>
<li><strong>动态检索策略</strong>：通用知识提前缓存，针对性问题再实时检索。</li>
<li><strong>可观察性</strong>：保留检索到的证据、生成的思路、执行日志，方便人工介入。</li>
<li><strong>安全护栏</strong>：沙箱执行、写操作白名单、敏感信息脱敏，一个都不能少。</li>
</ul>
<p>RAG 不是银弹，但它让编码助手从“会写代码的聊天机器人”变成“懂上下文的协作者”。当检索、生成、执行、反馈串在一起，开发者才能真正把时间花在创造价值上。</p>

      </article>

      
      

      
      
      <div class="giscus"></div>
      


  
    
  


  








  
    
    
  


<script
  src="https://giscus.app/client.js"
  data-repo="PsiACE/psiace"
  data-repo-id="R_kgDOKYGbpA"
  data-category="General"
  data-category-id="DIC_kwDOKYGbpM4CZxPW"
  data-mapping="specific"
  
    data-term="rag-in-coding-agent"
  
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="https://psiace.me/giscus_light.css"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async
></script>

      
    </div>

    


<footer>
  <div class="left">
    <div class="copyright">
      © 2025 Chojan Shang
      
      <span>|</span>
      Built with <a href="https://www.getzola.org" rel="noreferrer" target="_blank">zola</a> and <a href="https://github.com/isunjn/serene" rel="noreferrer" target="_blank">serene</a>
      
    </div>
  </div>

  <div class="right">
    
    
      
    
    
    <a id="rss-btn" href="https://psiace.me/posts/atom.xml">RSS</a>
    
    

    
    
    
    <button id="theme-toggle" aria-label="theme switch">
      <span class="moon-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill="currentColor"></path></svg>
</span>
      <span class="sun-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" fill="currentColor"></path></svg>
</span>
    </button>
    
  </div>
</footer>




<dialog id="rss-mask">
  <div>
    <a href="https:&#x2F;&#x2F;psiace.me&#x2F;posts&#x2F;atom.xml">https:&#x2F;&#x2F;psiace.me&#x2F;posts&#x2F;atom.xml</a>
    
    
    <button autofocus aria-label="copy" data-link="https:&#x2F;&#x2F;psiace.me&#x2F;posts&#x2F;atom.xml" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" >
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>

    </button>
  </div>
</dialog>



  </main>
</div>

  
<script src="/js/lightense.min.js"></script>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true });
</script>


  <script src="https://psiace.me/js/main.js"></script>
</body>

</html>
